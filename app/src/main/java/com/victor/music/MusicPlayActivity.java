package com.victor.music;import android.graphics.Color;import android.os.Build;import android.os.Handler;import android.os.Message;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.view.View;import android.view.Window;import android.view.WindowManager;import android.widget.ImageButton;import com.victor.dao.DbDao;import com.victor.data.MusicData;import com.victor.module.PlayModule;import com.victor.util.Constant;import com.victor.util.SharePreferencesUtil;import com.victor.view.MediaPlayView;import java.util.List;public class MusicPlayActivity extends AppCompatActivity implements View.OnClickListener {    private MediaPlayView mMpvPlay;    private ImageButton mIbPrev,mIbPlay,mIbNext;    Handler mHandler = new Handler(){        @Override        public void handleMessage(Message msg) {            switch (msg.what) {            }        }    };    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_music_play);        initialize();    }    private void initialize () {        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {            Window window = getWindow();            window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);            window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION);            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);            window.setStatusBarColor(Color.TRANSPARENT);        }        mMpvPlay = (MediaPlayView) findViewById(R.id.mpv);        mMpvPlay.setUiHandler(mHandler);        mIbPrev = (ImageButton) findViewById(R.id.ib_prev);        mIbPlay = (ImageButton) findViewById(R.id.ib_play);        mIbNext = (ImageButton) findViewById(R.id.ib_next);        mIbPrev.setOnClickListener(this);        mIbPlay.setOnClickListener(this);        mIbNext.setOnClickListener(this);    }    @Override    public void onClick(View v) {        switch (v.getId()) {            case R.id.ib_prev:                mMpvPlay.prev();                PlayModule.getInstance(this).prev();                break;            case R.id.ib_play:                if (mMpvPlay.isPlay()) {                    mMpvPlay.pause();                    PlayModule.getInstance(this).pause();                } else {                    mMpvPlay.play();                    if ( PlayModule.getInstance(this).isPlayOnline()) {                        List<MusicData> onlineList = DbDao.getInstance(this).queryMusic(Constant.TB.MUSIC_ONLINE);                        if (onlineList != null && onlineList.size() > 0) {                            PlayModule.getInstance(this).playOnline(onlineList.get(0));                        }                    } else {                        int current = SharePreferencesUtil.getInt(this, Constant.CURRENT_POSITION_KEY);                        PlayModule.getInstance(this).play(current);                    }                }                break;            case R.id.ib_next:                mMpvPlay.next();                PlayModule.getInstance(this).next();                break;        }    }}